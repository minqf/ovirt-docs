<?xml version="1.0"?>
<section id="References_oVirt_3_ISO_Uploader">
   <title>ISO Uploader</title>

<!-- A Reference provides additional information -->
<!-- A sample table layout is provided below -->
	<para>
		The oVirt Engine installation includes a tool for uploading <acronym>ISO</acronym> images to the <acronym>ISO</acronym> storage domain. This tool is referred to as the ISO uploader. It provides for the listing of storage domains and uploading of <acronym>ISO</acronym> files to them.
	</para>
	<para>
		The <acronym>ISO</acronym> uploader command is <command>ovirt-iso-uploader</command>. You must be logged in as the <systemitem class="username">root</systemitem> user to run it successfully. You must provide the administration credentials for the oVirt environment on the command line. Full usage information, including a list of all valid options for the command, is available by running the <command>ovirt-iso-uploader <parameter>-h</parameter></command> command.
	</para>
	<section>
		<title>Syntax</title>
		<para>
			The basic syntax is of the form:
		</para>
<screen>
Usage: <command>ovirt-iso-uploader <parameter><replaceable>[options]</replaceable></parameter> <parameter>list</parameter></command>
       <command>ovirt-iso-uploader <parameter><replaceable>[options]</replaceable></parameter> <parameter>upload</parameter> <parameter><replaceable>[file].[file]...[file]</replaceable></parameter></command>
</screen>
		<para>
			The two supported modes of operation are <parameter>list</parameter>, and <parameter>upload</parameter>.
		</para>
		<itemizedlist>
			<listitem>
				<para>
					The <parameter>list</parameter> parameter lists the available <acronym>ISO</acronym> storage domains. These storage domains are the valid targets for <acronym>ISO</acronym> uploads. By default the list is obtained from the oVirt Engine installation on the local machine.
				</para>
			</listitem>
			<listitem>
				<para>
					The <parameter>upload</parameter> parameter uploads the selected <acronym>ISO</acronym> file(s) to the specified <acronym>ISO</acronym> storage domain. By default the transfer is performed using <acronym>NFS</acronym> however <acronym>SSH</acronym> is also available.
				</para>
			</listitem>
		</itemizedlist>
		<para>
			Basic <acronym>ISO</acronym> uploader usage requires that, at a minimum, the either the <parameter>list</parameter> or <parameter>upload</parameter> parameter is provided. Where <parameter>upload</parameter> is selected then the name of at least one local file to upload must also be provided.
		</para>
		<para>
			The <command>ovirt-iso-uploader</command> command has a large number of options. 
		</para>
		<variablelist>
			<title>General Options</title>	
			<varlistentry>
				<term><parameter>--version</parameter></term>
				<listitem>
					<para>
						Displays the version number of the command in use, and exits immediately.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-h</parameter>, <parameter>--help</parameter></term>
				<listitem>
					<para>
						Displays command usage information, and exits immediately.	
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>--quiet</parameter></term>
				<listitem>
					<para>
						Sets quiet mode, reducing console output to a minimum. This is off by default.	
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>--log-file=<replaceable>PATH</replaceable></parameter></term>
				<listitem>
					<para>
						Sets <replaceable>PATH</replaceable> as the log file the command should use for its own log output.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>--conf-file=<replaceable>PATH</replaceable></parameter></term>
				<listitem>
					<para>
						Sets <replaceable>PATH</replaceable> as the configuration file the command should use.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-v</parameter>, <parameter>--verbose</parameter></term>
				<listitem>
					<para>
						Sets verbose mode, providing more console output. This is off by default.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-f</parameter>, <parameter>--force</parameter></term>
				<listitem>
					<para>
						Where the source file being uploaded has the same file name as an existing file at the destination, force the existing file to be overwritten automatically. This is off by default.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		<variablelist>
			<title>oVirt Engine Options</title>
			<para>
				The options in the oVirt Engine configuration group are used to specify the engine authentication details and, filter log collection from one or more virtualization hosts. If no options in this group are specified, data is not collected from any virtualization host.
			</para>
			<varlistentry>
				<term><parameter>-u <replaceable>USER</replaceable></parameter>, <parameter>--user=<replaceable>USER</replaceable></parameter></term>
				<listitem>
					<para>
						Sets the user as <replaceable>USER</replaceable>. This must be a user that exists in directory services, and is known to the oVirt Engine. The user must be specified in the format <replaceable>user</replaceable>@<replaceable>domain</replaceable>, where <replaceable>user</replaceable> replaced by the username, and <replaceable>domain</replaceable> is replaced by the directory services domain in use.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-r <replaceable>FQDN</replaceable></parameter>, <parameter>--ovirt=<replaceable>FQDN</replaceable></parameter></term>
				<listitem>
					<para>
						Sets the oVirt Engine to connect to as <replaceable>FQDN</replaceable>. <replaceable>FQDN</replaceable> must be replaced by the fully qualified domain name of the engine. By default it is assumed that the ISO uploader is being run on the same machine as the engine. Therefore the default value for this parameter is <literal>localhost</literal>.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		<variablelist>
			<title><acronym>ISO</acronym> Storage Domain Options</title>
			<para>The options in this configuration group are used to specify the <acronym>ISO</acronym> domain to which files must be uploaded</para>
			<varlistentry>
				<term><parameter>-i</parameter>, <parameter>--iso-domain=<replaceable>ISODOMAIN</replaceable></parameter></term>
				<listitem>
					<para>
						Sets the storage domain named <replaceable>ISODOMAIN</replaceable> as the destination for uploads.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-n</parameter>, <parameter>--nfs-server=<replaceable>NFSSERVER</replaceable></parameter></term>
				<listitem>
					<para>
						Sets the <acronym>NFS</acronym> path of <replaceable>NFSSERVER</replaceable> as the destination for uploads. This option is an alternative to <parameter>--iso-domain</parameter>, the two must not be used at the same time.
					</para>
					<example>
						<title>Specifying an <acronym>NFS</acronym> Server</title>
<screen>
# <command>ovirt-iso-uploader --nfs-server=<replaceable>storage.demo.redhat.com:/iso/path</replaceable> upload <replaceable>RHEL6.0.iso</replaceable></command>
</screen>
					</example>
				</listitem>
			</varlistentry>
		</variablelist>
		<variablelist>
			<title>Connection Options</title>
			<para>
				By default the <acronym>ISO</acronym> uploader uses <acronym>NFS</acronym> to upload files. Use options within this configuration group to use <acronym>SSH</acronym> file transfer instead.
			</para>
			<varlistentry>
				<term><parameter>--ssh-user=<replaceable>USER</replaceable></parameter></term>
				<listitem>
					<para>
						Sets <replaceable>USER</replaceable> as the <acronym>SSH</acronym> username to use for the upload.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>--ssh-port=<replaceable>PORT</replaceable></parameter></term>
				<listitem>
					<para>
						Sets <replaceable>PORT</replaceable> as the port to use when connecting to <acronym>SSH</acronym>.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><parameter>-k <replaceable>KEYFILE</replaceable></parameter>, <parameter>--key-file=<replaceable>KEYFILE</replaceable></parameter></term>
				<listitem>
					<para>
						Sets <replaceable>KEYFILE</replaceable> as the public key to use for <acronym>SSH</acronym> authentication. If no key is set the program will prompt you to enter the password of the user specified instead.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</section>
	<section>
		<title>Examples</title>
		<example>
			<title>Basic <acronym>ISO</acronym> Uploader Usage</title>
			<para>
				In this example the <acronym>ISO</acronym> uploader is run to list the available <acronym>ISO</acronym> storage domains. The username is not provided on the command line so the tool instead prompts for it to be entered. Once the storage domains have been listed, an <acronym>ISO</acronym> file is uploaded to one of them over <acronym>NFS</acronym>.
			</para>
<screen>
# <command>ovirt-iso-uploader list</command>
Please provide the REST API username for oVirt-M (CTRL+D to abort): <replaceable>admin@directory.demo.redhat.com</replaceable>
Please provide the REST API password for oVirt-M (CTRL+D to abort): 
ISO Storage Domain List:
  ISODomain
# <command>ovirt-iso-uploader --iso-domain=<replaceable>ISODomain</replaceable> upload <replaceable>RHEL6.iso</replaceable></command>
Please provide the REST API username for oVirt-M (CTRL+D to abort): <replaceable>admin@directory.demo.redhat.com</replaceable>
Please provide the REST API password for oVirt-M (CTRL+D to abort): 
</screen>
		</example>
	</section>
   <!-- Do not edit below this line! -->

   <!-- Injection Point: Related Overviews -->
   <!-- Injection Point: Related Concepts -->
   <!-- Injection Point: Related Tasks -->
</section>